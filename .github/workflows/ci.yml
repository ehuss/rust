#############################################################
#   WARNING: automatically generated file, DO NOT CHANGE!   #
#############################################################

# This file was automatically generated by the expand-yaml-anchors tool. The
# source file that generated this one is:
#
#   src/ci/github-actions/ci.yml
#
# Once you make changes to that file you need to run:
#
#   ./x.py run src/tools/expand-yaml-anchors/
#
# The CI build will fail if the tool is not run after changes to this file.

---
name: CI
on: [push, pull_request]

jobs:
  test:
    runs-on: macos-latest
    env:
      RUSTC_RETRY_LINKER_ON_SEGFAULT: 1
      MACOSX_DEPLOYMENT_TARGET: 10.8
      MACOSX_STD_DEPLOYMENT_TARGET: 10.7
      NO_LLVM_ASSERTIONS: 1
      NO_DEBUG_ASSERTIONS: 1
    steps:
    - uses: actions/checkout@master
      with:
        fetch-depth: 2
    - name: collect CPU statistics
      run: src/ci/scripts/collect-cpu-stats.sh
    - name: checkout submodules
      run: src/ci/scripts/checkout-submodules.sh
    - name: install clang
      run: src/ci/scripts/install-clang.sh
    - run: ./pretty-std-collections.sh
