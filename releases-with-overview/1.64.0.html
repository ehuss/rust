<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>1.64.0 - Rust Releases</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><a href="1.69.0.html">1.69.0</a></li><li class="chapter-item expanded affix "><a href="1.68.2.html">1.68.2</a></li><li class="chapter-item expanded affix "><a href="1.68.1.html">1.68.1</a></li><li class="chapter-item expanded affix "><a href="1.68.0.html">1.68.0</a></li><li class="chapter-item expanded affix "><a href="1.67.1.html">1.67.1</a></li><li class="chapter-item expanded affix "><a href="1.67.0.html">1.67.0</a></li><li class="chapter-item expanded affix "><a href="1.66.1.html">1.66.1</a></li><li class="chapter-item expanded affix "><a href="1.66.0.html">1.66.0</a></li><li class="chapter-item expanded affix "><a href="1.65.0.html">1.65.0</a></li><li class="chapter-item expanded affix "><a href="1.64.0.html" class="active">1.64.0</a></li><li class="chapter-item expanded affix "><a href="1.63.0.html">1.63.0</a></li><li class="chapter-item expanded affix "><a href="1.62.1.html">1.62.1</a></li><li class="chapter-item expanded affix "><a href="1.62.0.html">1.62.0</a></li><li class="chapter-item expanded affix "><a href="1.61.0.html">1.61.0</a></li><li class="chapter-item expanded affix "><a href="1.60.0.html">1.60.0</a></li><li class="chapter-item expanded affix "><a href="1.59.0.html">1.59.0</a></li><li class="chapter-item expanded affix "><a href="1.58.1.html">1.58.1</a></li><li class="chapter-item expanded affix "><a href="1.58.0.html">1.58.0</a></li><li class="chapter-item expanded affix "><a href="1.57.0.html">1.57.0</a></li><li class="chapter-item expanded affix "><a href="1.56.1.html">1.56.1</a></li><li class="chapter-item expanded affix "><a href="1.56.0.html">1.56.0</a></li><li class="chapter-item expanded affix "><a href="1.55.0.html">1.55.0</a></li><li class="chapter-item expanded affix "><a href="1.54.0.html">1.54.0</a></li><li class="chapter-item expanded affix "><a href="1.53.0.html">1.53.0</a></li><li class="chapter-item expanded affix "><a href="1.52.1.html">1.52.1</a></li><li class="chapter-item expanded affix "><a href="1.52.0.html">1.52.0</a></li><li class="chapter-item expanded affix "><a href="1.51.0.html">1.51.0</a></li><li class="chapter-item expanded affix "><a href="1.50.0.html">1.50.0</a></li><li class="chapter-item expanded affix "><a href="1.49.0.html">1.49.0</a></li><li class="chapter-item expanded affix "><a href="1.48.0.html">1.48.0</a></li><li class="chapter-item expanded affix "><a href="1.47.0.html">1.47.0</a></li><li class="chapter-item expanded affix "><a href="1.46.0.html">1.46.0</a></li><li class="chapter-item expanded affix "><a href="1.45.2.html">1.45.2</a></li><li class="chapter-item expanded affix "><a href="1.45.1.html">1.45.1</a></li><li class="chapter-item expanded affix "><a href="1.45.0.html">1.45.0</a></li><li class="chapter-item expanded affix "><a href="1.44.1.html">1.44.1</a></li><li class="chapter-item expanded affix "><a href="1.44.0.html">1.44.0</a></li><li class="chapter-item expanded affix "><a href="1.43.1.html">1.43.1</a></li><li class="chapter-item expanded affix "><a href="1.43.0.html">1.43.0</a></li><li class="chapter-item expanded affix "><a href="1.42.0.html">1.42.0</a></li><li class="chapter-item expanded affix "><a href="1.41.1.html">1.41.1</a></li><li class="chapter-item expanded affix "><a href="1.41.0.html">1.41.0</a></li><li class="chapter-item expanded affix "><a href="1.40.0.html">1.40.0</a></li><li class="chapter-item expanded affix "><a href="1.39.0.html">1.39.0</a></li><li class="chapter-item expanded affix "><a href="1.38.0.html">1.38.0</a></li><li class="chapter-item expanded affix "><a href="1.37.0.html">1.37.0</a></li><li class="chapter-item expanded affix "><a href="1.36.0.html">1.36.0</a></li><li class="chapter-item expanded affix "><a href="1.35.0.html">1.35.0</a></li><li class="chapter-item expanded affix "><a href="1.34.2.html">1.34.2</a></li><li class="chapter-item expanded affix "><a href="1.34.1.html">1.34.1</a></li><li class="chapter-item expanded affix "><a href="1.34.0.html">1.34.0</a></li><li class="chapter-item expanded affix "><a href="1.33.0.html">1.33.0</a></li><li class="chapter-item expanded affix "><a href="1.32.0.html">1.32.0</a></li><li class="chapter-item expanded affix "><a href="1.31.1.html">1.31.1</a></li><li class="chapter-item expanded affix "><a href="1.31.0.html">1.31.0</a></li><li class="chapter-item expanded affix "><a href="1.30.1.html">1.30.1</a></li><li class="chapter-item expanded affix "><a href="1.30.0.html">1.30.0</a></li><li class="chapter-item expanded affix "><a href="1.29.2.html">1.29.2</a></li><li class="chapter-item expanded affix "><a href="1.29.1.html">1.29.1</a></li><li class="chapter-item expanded affix "><a href="1.29.0.html">1.29.0</a></li><li class="chapter-item expanded affix "><a href="1.28.0.html">1.28.0</a></li><li class="chapter-item expanded affix "><a href="1.27.2.html">1.27.2</a></li><li class="chapter-item expanded affix "><a href="1.27.1.html">1.27.1</a></li><li class="chapter-item expanded affix "><a href="1.27.0.html">1.27.0</a></li><li class="chapter-item expanded affix "><a href="1.26.2.html">1.26.2</a></li><li class="chapter-item expanded affix "><a href="1.26.1.html">1.26.1</a></li><li class="chapter-item expanded affix "><a href="1.26.0.html">1.26.0</a></li><li class="chapter-item expanded affix "><a href="1.25.0.html">1.25.0</a></li><li class="chapter-item expanded affix "><a href="1.24.1.html">1.24.1</a></li><li class="chapter-item expanded affix "><a href="1.24.0.html">1.24.0</a></li><li class="chapter-item expanded affix "><a href="1.23.0.html">1.23.0</a></li><li class="chapter-item expanded affix "><a href="1.22.1.html">1.22.1</a></li><li class="chapter-item expanded affix "><a href="1.22.0.html">1.22.0</a></li><li class="chapter-item expanded affix "><a href="1.21.0.html">1.21.0</a></li><li class="chapter-item expanded affix "><a href="1.20.0.html">1.20.0</a></li><li class="chapter-item expanded affix "><a href="1.19.0.html">1.19.0</a></li><li class="chapter-item expanded affix "><a href="1.18.0.html">1.18.0</a></li><li class="chapter-item expanded affix "><a href="1.17.0.html">1.17.0</a></li><li class="chapter-item expanded affix "><a href="1.16.0.html">1.16.0</a></li><li class="chapter-item expanded affix "><a href="1.15.1.html">1.15.1</a></li><li class="chapter-item expanded affix "><a href="1.15.0.html">1.15.0</a></li><li class="chapter-item expanded affix "><a href="1.14.0.html">1.14.0</a></li><li class="chapter-item expanded affix "><a href="1.13.0.html">1.13.0</a></li><li class="chapter-item expanded affix "><a href="1.12.1.html">1.12.1</a></li><li class="chapter-item expanded affix "><a href="1.12.0.html">1.12.0</a></li><li class="chapter-item expanded affix "><a href="1.11.0.html">1.11.0</a></li><li class="chapter-item expanded affix "><a href="1.10.0.html">1.10.0</a></li><li class="chapter-item expanded affix "><a href="1.9.0.html">1.9.0</a></li><li class="chapter-item expanded affix "><a href="1.8.0.html">1.8.0</a></li><li class="chapter-item expanded affix "><a href="1.7.0.html">1.7.0</a></li><li class="chapter-item expanded affix "><a href="1.6.0.html">1.6.0</a></li><li class="chapter-item expanded affix "><a href="1.5.0.html">1.5.0</a></li><li class="chapter-item expanded affix "><a href="1.4.0.html">1.4.0</a></li><li class="chapter-item expanded affix "><a href="1.3.0.html">1.3.0</a></li><li class="chapter-item expanded affix "><a href="1.2.0.html">1.2.0</a></li><li class="chapter-item expanded affix "><a href="1.1.0.html">1.1.0</a></li><li class="chapter-item expanded affix "><a href="1.0.0.html">1.0.0</a></li><li class="chapter-item expanded affix "><a href="1.0.0-alpha.2.html">1.0.0-alpha.2</a></li><li class="chapter-item expanded affix "><a href="1.0.0-alpha.html">1.0.0-alpha</a></li><li class="chapter-item expanded affix "><a href="0.12.0.html">0.12.0</a></li><li class="chapter-item expanded affix "><a href="0.11.0.html">0.11.0</a></li><li class="chapter-item expanded affix "><a href="0.10.html">0.10</a></li><li class="chapter-item expanded affix "><a href="0.9.html">0.9</a></li><li class="chapter-item expanded affix "><a href="0.8.html">0.8</a></li><li class="chapter-item expanded affix "><a href="0.7.html">0.7</a></li><li class="chapter-item expanded affix "><a href="0.6.html">0.6</a></li><li class="chapter-item expanded affix "><a href="0.5.html">0.5</a></li><li class="chapter-item expanded affix "><a href="0.4.html">0.4</a></li><li class="chapter-item expanded affix "><a href="0.3.html">0.3</a></li><li class="chapter-item expanded affix "><a href="0.2.html">0.2</a></li><li class="chapter-item expanded affix "><a href="0.1.html">0.1</a></li><li class="chapter-item expanded affix "><a href="all.html">All Releases</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Rust Releases</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/rust-lang/rust/tree/master/src/doc/releases/" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="version-1640"><a class="header" href="#version-1640">Version 1.64.0</a></h1>
<p>Release Date: <strong>2022-09-22</strong></p>
<h2 id="whats-in-1640-stable"><a class="header" href="#whats-in-1640-stable">What's in 1.64.0 stable</a></h2>
<h3 id="enhancing-await-with-intofuture"><a class="header" href="#enhancing-await-with-intofuture">Enhancing <code>.await</code> with <code>IntoFuture</code></a></h3>
<p>Rust 1.64 stabilizes the
<a href="https://doc.rust-lang.org/std/future/trait.IntoFuture.html"><code>IntoFuture</code></a>
trait. <code>IntoFuture</code> is a trait similar to
<a href="https://doc.rust-lang.org/std/iter/trait.IntoIterator.html"><code>IntoIterator</code></a>,
but rather than supporting <code>for ... in ...</code> loops, <code>IntoFuture</code> changes how
<code>.await</code> works. With <code>IntoFuture</code>, the <code>.await</code> keyword can await more than
just futures; it can await <em>anything which can be converted into a <code>Future</code> via
<code>IntoFuture</code></em> - which can help make your APIs more user-friendly!</p>
<p>Take for example a builder which constructs requests to some storage provider
over the network:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct Error { ... }
pub struct StorageResponse { ... }:
pub struct StorageRequest(bool);

impl StorageRequest {
    /// Create a new instance of `StorageRequest`.
    pub fn new() -&gt; Self { ... }
    /// Decide whether debug mode should be enabled.
    pub fn set_debug(self, b: bool) -&gt; Self { ... }
    /// Send the request and receive a response.
    pub async fn send(self) -&gt; Result&lt;StorageResponse, Error&gt; { ... }
}
<span class="boring">}</span></code></pre></pre>
<p>Typical usage would likely look something like this:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let response = StorageRequest::new()  // 1. create a new instance
    .set_debug(true)                  // 2. set some option
    .send()                           // 3. construct the future
    .await?;                          // 4. run the future + propagate errors
<span class="boring">}</span></code></pre></pre>
<p>This is not bad, but we can do better here. Using <code>IntoFuture</code> we can combine
<em>&quot;construct the future&quot;</em> (line 3) and <em>&quot;run the future&quot;</em> (line 4) into a single
step:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let response = StorageRequest::new()  // 1. create a new instance
    .set_debug(true)                  // 2. set some option
    .await?;                          // 3. construct + run the future + propagate errors
<span class="boring">}</span></code></pre></pre>
<p>We can do this by implementing <code>IntoFuture</code> for <code>StorageRequest</code>. <code>IntoFuture</code>
requires us to have a named future we can return, which we can do by creating a
&quot;boxed future&quot; and defining a type alias for it:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// First we must import some new types into the scope.
use std::pin::Pin;
use std::future::{Future, IntoFuture};

pub struct Error { ... }
pub struct StorageResponse { ... }
pub struct StorageRequest(bool);

impl StorageRequest {
    /// Create a new instance of `StorageRequest`.
    pub fn new() -&gt; Self { ... }
    /// Decide whether debug mode should be enabled.
    pub fn set_debug(self, b: bool) -&gt; Self { ... }
    /// Send the request and receive a response.
    pub async fn send(self) -&gt; Result&lt;StorageResponse, Error&gt; { ... }
}

// The new implementations:
// 1. create a new named future type
// 2. implement `IntoFuture` for `StorageRequest`
pub type StorageRequestFuture = Pin&lt;Box&lt;dyn Future&lt;Output = Result&lt;StorageResponse, Error&gt;&gt; + Send + 'static&gt;&gt;
impl IntoFuture for StorageRequest {
    type IntoFuture = StorageRequestFuture;
    type Output = &lt;StorageRequestFuture as Future&gt;::Output;
    fn into_future(self) -&gt; Self::IntoFuture {
        Box::pin(self.send())
    }
}
<span class="boring">}</span></code></pre></pre>
<p>This takes a bit more code to implement, but provides a simpler API for users.</p>
<p>In the future, the Rust Async WG hopes to simplify the creating new named
futures by supporting <a href="https://rust-lang.github.io/impl-trait-initiative/explainer/tait.html"><code>impl Trait</code> in <code>type</code> aliases (Type Alias Impl Trait or
TAIT)</a>.
This should make implementing <code>IntoFuture</code> easier by simplifying the type
alias' signature, and make it more performant by removing the <code>Box</code> from the
type alias.</p>
<h3 id="c-compatible-ffi-types-in-core-and-alloc"><a class="header" href="#c-compatible-ffi-types-in-core-and-alloc">C-compatible FFI types in core and alloc</a></h3>
<p>When calling or being called by C ABIs, Rust code can use type aliases like
<code>c_uint</code> or <code>c_ulong</code> to match the corresponding types from C on any target,
without requiring target-specific code or conditionals.</p>
<p>Previously, these type aliases were only available in <code>std</code>, so code written
for embedded targets and other scenarios that could only use <code>core</code> or <code>alloc</code>
could not use these types.</p>
<p>Rust 1.64 now provides all of the <code>c_*</code> type aliases in
<a href="https://doc.rust-lang.org/core/ffi/index.html"><code>core::ffi</code></a>, as well as
<a href="https://doc.rust-lang.org/core/ffi/struct.CStr.html"><code>core::ffi::CStr</code></a> for
working with C strings. Rust 1.64 also provides
<a href="https://doc.rust-lang.org/alloc/ffi/struct.CString.html"><code>alloc::ffi::CString</code></a>
for working with owned C strings using only the <code>alloc</code> crate, rather than the
full <code>std</code> library.</p>
<h3 id="rust-analyzer-is-now-available-via-rustup"><a class="header" href="#rust-analyzer-is-now-available-via-rustup">rust-analyzer is now available via rustup</a></h3>
<p><a href="https://rust-analyzer.github.io/">rust-analyzer</a> is now included as part of
the collection of tools included with Rust. This makes it easier to download
and access rust-analyzer, and makes it available on more platforms. It is
available as a <a href="https://rust-lang.github.io/rustup/concepts/components.html">rustup
component</a> which
can be installed with:</p>
<pre><code>rustup component add rust-analyzer
</code></pre>
<p>At this time, to run the rustup-installed version, you need to invoke it this
way:</p>
<pre><code>rustup run stable rust-analyzer
</code></pre>
<p>The next release of rustup will provide a built-in proxy so that running the
executable <code>rust-analyzer</code> will launch the appropriate version.</p>
<p>Most users should continue to use the releases provided by the rust-analyzer
team (available on the <a href="https://github.com/rust-lang/rust-analyzer/releases">rust-analyzer releases
page</a>), which are
published more frequently. Users of the <a href="https://marketplace.visualstudio.com/items?itemName=rust-lang.rust-analyzer">official VSCode
extension</a>
are not affected since it automatically downloads and updates releases in the
background.</p>
<h3 id="cargo-improvements-workspace-inheritance-and-multi-target-builds"><a class="header" href="#cargo-improvements-workspace-inheritance-and-multi-target-builds">Cargo improvements: workspace inheritance and multi-target builds</a></h3>
<p>When working with collections of related libraries or binary crates in one
Cargo workspace, you can now avoid duplication of common field values between
crates, such as common version numbers, repository URLs, or <code>rust-version</code>.
This also helps keep these values in sync between crates when updating them.
For more details, see
<a href="https://doc.rust-lang.org/cargo/reference/workspaces.html#the-package-table"><code>workspace.package</code></a>,
<a href="https://doc.rust-lang.org/cargo/reference/workspaces.html#the-dependencies-table"><code>workspace.dependencies</code></a>,
and <a href="https://doc.rust-lang.org/cargo/reference/specifying-dependencies.html#inheriting-a-dependency-from-a-workspace">&quot;inheriting a dependency from a
workspace&quot;</a>.</p>
<p>When building for multiple targets, you can now pass multiple <code>--target</code>
options to <code>cargo build</code>, to build all of those targets at once. You can also
set
<a href="https://doc.rust-lang.org/cargo/reference/config.html#buildtarget"><code>build.target</code></a>
to an array of multiple targets in <code>.cargo/config.toml</code> to build for multiple
targets by default.</p>
<h3 id="compatibility-notes"><a class="header" href="#compatibility-notes">Compatibility notes</a></h3>
<ul>
<li>
<p>As <a href="https://blog.rust-lang.org/2022/08/01/Increasing-glibc-kernel-requirements.html">previously
announced</a>,
<code>linux</code> targets now require at least Linux kernel 3.2 (except for targets which
already required a newer kernel), and <code>linux-gnu</code> targets now require glibc
2.17 (except for targets which already required a newer glibc).</p>
</li>
<li>
<p>Rust 1.64.0 changes the memory layout of <code>Ipv4Addr</code>, <code>Ipv6Addr</code>,
<code>SocketAddrV4</code> and <code>SocketAddrV6</code> to be more compact and memory efficient.
This internal representation was never exposed, but some crates relied on
it anyway by using <code>std::mem::transmute</code>, resulting in invalid memory
accesses. Such internal implementation details of the standard library are
<em>never</em> considered a stable interface. To limit the damage, we worked with
the authors of all of the still-maintained crates doing so to release fixed
versions, which have been out for more than a year. The vast majority of
impacted users should be able to mitigate with a <code>cargo update</code>.</p>
</li>
<li>
<p>As part of the <a href="https://blog.rust-lang.org/2022/07/01/RLS-deprecation.html">RLS
deprecation</a>,
this is also the last release containing a copy of RLS. Starting from Rust
1.65.0, RLS will be replaced by a small LSP server showing the deprecation
warning.</p>
</li>
</ul>
<h3 id="other-changes"><a class="header" href="#other-changes">Other changes</a></h3>
<p>There are other changes in the Rust 1.64 release, including:</p>
<ul>
<li>
<p>Windows builds of the Rust compiler now use profile-guided optimization,
providing performance improvements of 10-20% for compiling Rust code on
Windows.</p>
</li>
<li>
<p>If you define a struct containing fields that are never used, rustc will warn
about the unused fields. Now, in Rust 1.64, you can enable the
<code>unused_tuple_struct_fields</code> lint to get the same warnings about unused
fields in a tuple struct. In future versions, we plan to make this lint
warn by default.  Fields of type unit (<code>()</code>) do not produce this warning,
to make it easier to migrate existing code without having to change tuple
indices.</p>
</li>
</ul>
<h2 id="detailed-changes"><a class="header" href="#detailed-changes">Detailed changes</a></h2>
<h3 id="language"><a class="header" href="#language">Language</a></h3>
<ul>
<li><a href="https://github.com/rust-lang/rust/pull/97995/">Unions with mutable references or tuples of allowed types are now allowed</a></li>
<li>It is now considered valid to deallocate memory pointed to by a shared reference <code>&amp;T</code> <a href="https://github.com/rust-lang/rust/pull/98017/">if every byte in <code>T</code> is inside an <code>UnsafeCell</code></a></li>
<li>Unused tuple struct fields are now warned against in an allow-by-default lint, <a href="https://github.com/rust-lang/rust/pull/95977/"><code>unused_tuple_struct_fields</code></a>, similar to the existing warning for unused struct fields. This lint will become warn-by-default in the future.</li>
</ul>
<h3 id="compiler"><a class="header" href="#compiler">Compiler</a></h3>
<ul>
<li><a href="https://github.com/rust-lang/rust/pull/88991/">Add Nintendo Switch as tier 3 target</a>
<ul>
<li>Refer to Rust's <a href="https://doc.rust-lang.org/nightly/rustc/platform-support.html">platform support page</a> for more
information on Rust's tiered platform support.</li>
</ul>
</li>
<li><a href="https://github.com/rust-lang/rust/pull/93718/">Only compile <code>#[used]</code> as llvm.compiler.used for ELF targets</a></li>
<li><a href="https://github.com/rust-lang/rust/pull/95635/">Add the <code>--diagnostic-width</code> compiler flag to define the terminal width.</a></li>
<li><a href="https://github.com/rust-lang/rust/pull/98771/">Add support for link-flavor <code>rust-lld</code> for iOS, tvOS and watchOS</a></li>
</ul>
<h3 id="libraries"><a class="header" href="#libraries">Libraries</a></h3>
<ul>
<li><a href="https://github.com/rust-lang/rust/pull/98383/">Remove restrictions on compare-exchange memory ordering.</a></li>
<li>You can now <code>write!</code> or <code>writeln!</code> into an <code>OsString</code>: <a href="https://github.com/rust-lang/rust/pull/97915/">Implement <code>fmt::Write</code> for <code>OsString</code></a></li>
<li><a href="https://github.com/rust-lang/rust/pull/96820/">Make RwLockReadGuard covariant</a></li>
<li><a href="https://github.com/rust-lang/rust/pull/97300/">Implement <code>FusedIterator</code> for <code>std::net::[Into]Incoming</code></a></li>
<li><a href="https://github.com/rust-lang/rust/pull/97437/"><code>impl&lt;T: AsRawFd&gt; AsRawFd for {Arc,Box}&lt;T&gt;</code></a></li>
<li><a href="https://github.com/rust-lang/rust/pull/97712/"><code>ptr::copy</code> and <code>ptr::swap</code> are doing untyped copies</a></li>
<li><a href="https://github.com/rust-lang/rust/pull/97925/">Add cgroupv1 support to <code>available_parallelism</code></a></li>
<li><a href="https://github.com/rust-lang/rust/pull/99182/">Mitigate many incorrect uses of <code>mem::uninitialized</code></a></li>
</ul>
<h3 id="stabilized-apis"><a class="header" href="#stabilized-apis">Stabilized APIs</a></h3>
<ul>
<li><a href="https://doc.rust-lang.org/stable/std/future/trait.IntoFuture.html"><code>future::IntoFuture</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/future/fn.poll_fn.html"><code>future::poll_fn</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/task/macro.ready.html"><code>task::ready!</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/num/struct.NonZeroUsize.html#method.checked_mul"><code>num::NonZero*::checked_mul</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/num/struct.NonZeroUsize.html#method.checked_pow"><code>num::NonZero*::checked_pow</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/num/struct.NonZeroUsize.html#method.saturating_mul"><code>num::NonZero*::saturating_mul</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/num/struct.NonZeroUsize.html#method.saturating_pow"><code>num::NonZero*::saturating_pow</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/num/struct.NonZeroIsize.html#method.abs"><code>num::NonZeroI*::abs</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/num/struct.NonZeroIsize.html#method.checked_abs"><code>num::NonZeroI*::checked_abs</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/num/struct.NonZeroIsize.html#method.overflowing_abs"><code>num::NonZeroI*::overflowing_abs</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/num/struct.NonZeroIsize.html#method.saturating_abs"><code>num::NonZeroI*::saturating_abs</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/num/struct.NonZeroIsize.html#method.unsigned_abs"><code>num::NonZeroI*::unsigned_abs</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/num/struct.NonZeroIsize.html#method.wrapping_abs"><code>num::NonZeroI*::wrapping_abs</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/num/struct.NonZeroUsize.html#method.checked_add"><code>num::NonZeroU*::checked_add</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/num/struct.NonZeroUsize.html#method.checked_next_power_of_two"><code>num::NonZeroU*::checked_next_power_of_two</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/num/struct.NonZeroUsize.html#method.saturating_add"><code>num::NonZeroU*::saturating_add</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/os/unix/process/trait.CommandExt.html#tymethod.process_group"><code>os::unix::process::CommandExt::process_group</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/os/windows/fs/trait.FileTypeExt.html#tymethod.is_symlink_dir"><code>os::windows::fs::FileTypeExt::is_symlink_dir</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/os/windows/fs/trait.FileTypeExt.html#tymethod.is_symlink_file"><code>os::windows::fs::FileTypeExt::is_symlink_file</code></a></li>
</ul>
<p>These types were previously stable in <code>std::ffi</code>, but are now also available in <code>core</code> and <code>alloc</code>:</p>
<ul>
<li><a href="https://doc.rust-lang.org/stable/core/ffi/struct.CStr.html"><code>core::ffi::CStr</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/ffi/struct.FromBytesWithNulError.html"><code>core::ffi::FromBytesWithNulError</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/alloc/ffi/struct.CString.html"><code>alloc::ffi::CString</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/alloc/ffi/struct.FromVecWithNulError.html"><code>alloc::ffi::FromVecWithNulError</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/alloc/ffi/struct.IntoStringError.html"><code>alloc::ffi::IntoStringError</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/alloc/ffi/struct.NulError.html"><code>alloc::ffi::NulError</code></a></li>
</ul>
<p>These types were previously stable in <code>std::os::raw</code>, but are now also available in <code>core::ffi</code> and <code>std::ffi</code>:</p>
<ul>
<li><a href="https://doc.rust-lang.org/stable/std/ffi/type.c_char.html"><code>ffi::c_char</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/ffi/type.c_double.html"><code>ffi::c_double</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/ffi/type.c_float.html"><code>ffi::c_float</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/ffi/type.c_int.html"><code>ffi::c_int</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/ffi/type.c_long.html"><code>ffi::c_long</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/ffi/type.c_longlong.html"><code>ffi::c_longlong</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/ffi/type.c_schar.html"><code>ffi::c_schar</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/ffi/type.c_short.html"><code>ffi::c_short</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/ffi/type.c_uchar.html"><code>ffi::c_uchar</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/ffi/type.c_uint.html"><code>ffi::c_uint</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/ffi/type.c_ulong.html"><code>ffi::c_ulong</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/ffi/type.c_ulonglong.html"><code>ffi::c_ulonglong</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/ffi/type.c_ushort.html"><code>ffi::c_ushort</code></a></li>
</ul>
<p>These APIs are now usable in const contexts:</p>
<ul>
<li><a href="https://doc.rust-lang.org/stable/core/slice/fn.from_raw_parts.html"><code>slice::from_raw_parts</code></a></li>
</ul>
<h3 id="cargo"><a class="header" href="#cargo">Cargo</a></h3>
<ul>
<li><a href="https://github.com/rust-lang/cargo/pull/10859">Packages can now inherit settings from the workspace so that the settings
can be centralized in one place.</a> See
<a href="https://doc.rust-lang.org/nightly/cargo/reference/workspaces.html#the-workspacepackage-table"><code>workspace.package</code></a>
and
<a href="https://doc.rust-lang.org/nightly/cargo/reference/workspaces.html#the-workspacedependencies-table"><code>workspace.dependencies</code></a>
for more details on how to define these common settings.</li>
<li><a href="https://github.com/rust-lang/cargo/pull/10766">Cargo commands can now accept multiple <code>--target</code> flags to build for
multiple targets at once</a>, and the
<a href="https://doc.rust-lang.org/nightly/cargo/reference/config.html#buildtarget"><code>build.target</code></a>
config option may now take an array of multiple targets.</li>
<li><a href="https://github.com/rust-lang/cargo/pull/10844">The <code>--jobs</code> argument can now take a negative number to count backwards from
the max CPUs.</a></li>
<li><a href="https://github.com/rust-lang/cargo/pull/10902"><code>cargo add</code> will now update <code>Cargo.lock</code>.</a></li>
<li><a href="https://github.com/rust-lang/cargo/pull/10838">Added</a> the
<a href="https://doc.rust-lang.org/nightly/cargo/commands/cargo-rustc.html#option-cargo-rustc---crate-type"><code>--crate-type</code></a>
flag to <code>cargo rustc</code> to override the crate type.</li>
<li><a href="https://github.com/rust-lang/cargo/pull/10079">Significantly improved the performance fetching git dependencies from GitHub
when using a hash in the <code>rev</code> field.</a></li>
</ul>
<h3 id="misc"><a class="header" href="#misc">Misc</a></h3>
<ul>
<li><a href="https://github.com/rust-lang/rust/pull/98640/">The <code>rust-analyzer</code> rustup component is now available on the stable channel.</a></li>
</ul>
<h3 id="compatibility-notes-1"><a class="header" href="#compatibility-notes-1">Compatibility Notes</a></h3>
<ul>
<li>The minimum required versions for all <code>-linux-gnu</code> targets are now at least kernel 3.2 and glibc 2.17, for targets that previously supported older versions: <a href="https://github.com/rust-lang/rust/pull/95026/">Increase the minimum linux-gnu versions</a></li>
<li><a href="https://github.com/rust-lang/rust/pull/78802/">Network primitives are now implemented with the ideal Rust layout, not the C system layout</a>. This can cause problems when transmuting the types.</li>
<li><a href="https://github.com/rust-lang/rust/pull/98839/">Add assertion that <code>transmute_copy</code>'s <code>U</code> is not larger than <code>T</code></a></li>
<li><a href="https://github.com/rust-lang/rust/pull/99413/">A soundness bug in <code>BTreeMap</code> was fixed</a> that allowed data it was borrowing to be dropped before the container.</li>
<li><a href="https://github.com/rust-lang/rust/pull/96862/">The Drop behavior of C-like enums cast to ints has changed</a>. These are already discouraged by a compiler warning.</li>
<li><a href="https://github.com/rust-lang/rust/pull/98835/">Relate late-bound closure lifetimes to parent fn in NLL</a></li>
<li><a href="https://github.com/rust-lang/rust/pull/97743/">Errors at const-eval time are now in future incompatibility reports</a></li>
<li>On the <code>thumbv6m-none-eabi</code> target, some incorrect <code>asm!</code> statements were erroneously accepted if they used the high registers (r8 to r14) as an input/output operand. <a href="https://github.com/rust-lang/rust/pull/99155/">This is no longer accepted</a>.</li>
<li><a href="https://github.com/rust-lang/rust/pull/97346/"><code>impl Trait</code> was accidentally accepted as the associated type value of return-position <code>impl Trait</code></a>, without fulfilling all the trait bounds of that associated type, as long as the hidden type satisfies said bounds. This has been fixed.</li>
</ul>
<h3 id="internal-changes"><a class="header" href="#internal-changes">Internal Changes</a></h3>
<p>These changes do not affect any public interfaces of Rust, but they represent
significant improvements to the performance or internals of rustc and related
tools.</p>
<ul>
<li>Windows builds now use profile-guided optimization, providing 10-20% improvements to compiler performance: <a href="https://github.com/rust-lang/rust/pull/96978/">Utilize PGO for windows x64 rustc dist builds</a></li>
<li><a href="https://github.com/rust-lang/rust/pull/96544/">Stop keeping metadata in memory before writing it to disk</a></li>
<li><a href="https://github.com/rust-lang/rust/pull/98140/">compiletest: strip debuginfo by default for mode=ui</a></li>
<li>Many improvements to generated code for derives, including performance improvements:
<ul>
<li><a href="https://github.com/rust-lang/rust/pull/98446/">Don't use match-destructuring for derived ops on structs.</a></li>
<li><a href="https://github.com/rust-lang/rust/pull/98741/">Many small deriving cleanups</a></li>
<li><a href="https://github.com/rust-lang/rust/pull/98758/">More derive output improvements</a></li>
<li><a href="https://github.com/rust-lang/rust/pull/98915/">Clarify deriving code</a></li>
<li><a href="https://github.com/rust-lang/rust/pull/99046/">Final derive output improvements</a></li>
<li><a href="https://github.com/rust-lang/rust/pull/99485/">Stop injecting <code>#[allow(unused_qualifications)]</code> in generated <code>derive</code> implementations</a></li>
<li><a href="https://github.com/rust-lang/rust/pull/98190/">Improve <code>derive(Debug)</code></a></li>
</ul>
</li>
<li><a href="https://github.com/rust-lang/rust/pull/98213/">Bump to clap 3</a></li>
<li><a href="https://github.com/rust-lang/rust/pull/98641/">fully move dropck to mir</a></li>
<li><a href="https://github.com/rust-lang/rust/pull/98755/">Optimize <code>Vec::insert</code> for the case where <code>index == len</code>.</a></li>
<li><a href="https://github.com/rust-lang/rust/pull/99603/">Convert rust-analyzer to an in-tree tool</a></li>
</ul>
<h2 id="contributors-to-1640"><a class="header" href="#contributors-to-1640">Contributors to 1.64.0</a></h2>
<p>Many people came together to create Rust 1.64.0.
We couldn't have done it without all of you.
<a href="https://thanks.rust-lang.org/rust/1.64.0/">Thanks!</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="1.65.0.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="1.63.0.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="1.65.0.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="1.63.0.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
